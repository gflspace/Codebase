import { Badge } from "@/components/ui/badge";
import { Sparkles, AlertTriangle, CheckCircle2, Clock } from "lucide-react";
import { cn } from "@/lib/utils";

export default function TriageBadge({ vulnerability, showDetails = false }) {
  if (vulnerability.triage_status === 'pending') {
    return (
      <Badge className="bg-slate-500/10 text-slate-400 border-slate-500/20 text-xs">
        <Clock className="w-3 h-3 mr-1" />
        Pending Triage
      </Badge>
    );
  }

  if (vulnerability.triage_status === 'triaged') {
    const priorityColor = vulnerability.triage_priority >= 90 ? 'text-red-400 border-red-500/20 bg-red-500/10' :
                          vulnerability.triage_priority >= 75 ? 'text-orange-400 border-orange-500/20 bg-orange-500/10' :
                          vulnerability.triage_priority >= 50 ? 'text-amber-400 border-amber-500/20 bg-amber-500/10' :
                          'text-blue-400 border-blue-500/20 bg-blue-500/10';

    return (
      <div className="flex items-center gap-2">
        <Badge className={cn("text-xs border", priorityColor)}>
          <Sparkles className="w-3 h-3 mr-1" />
          P{Math.round(vulnerability.triage_priority || 0)}
        </Badge>
        {vulnerability.requires_senior_review && (
          <Badge className="bg-purple-500/10 text-purple-400 border-purple-500/20 text-xs">
            <AlertTriangle className="w-3 h-3 mr-1" />
            Senior Review
          </Badge>
        )}
        {showDetails && vulnerability.asset_criticality && (
          <Badge variant="outline" className="border-slate-700 text-slate-400 text-xs">
            {vulnerability.asset_criticality} asset
          </Badge>
        )}
      </div>
    );
  }

  return null;
}